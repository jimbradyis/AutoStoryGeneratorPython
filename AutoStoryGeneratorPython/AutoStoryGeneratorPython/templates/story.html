{% extends "layout.html" %}

{% block content %}
<h2>Your Generated Story</h2>
<p><strong>ID:</strong> {{ story.id }}</p>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Initial Story Details</h3>
    </div>
    <div class="panel-body">
        <p><strong>Prompt:</strong> {{ story.prompt }}</p>
        <p><strong>Genre:</strong> {{ story.genre }}</p>
        <p><strong>Tone:</strong> {{ story.tone }}</p>
    </div>
</div>

<div class="panel panel-primary">
    <div class="panel-heading">
        <h3 class="panel-title">World Builder Generation</h3>
    </div>
    <div class="panel-body">
        <h4>Phase 1: Initial Topics</h4>
        {% if story.world_builder %}
            <p>The following {{ story.world_builder|length }} world-building topics were generated:</p>
            <ul class="list-group">
                {% for entry in story.world_builder %}
                <li class="list-group-item">
                    <h5 class="list-group-item-heading"><strong>{{ entry.category }}</strong></h5>
                    <p class="list-group-item-text">{{ entry.description }}</p>
                </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>Generating world builder entries...</p>
            <!-- In a real app, a loading spinner would go here -->
        {% endif %}
    </div>
</div>

<!-- Placeholders for future generation steps -->
<div class="panel panel-info">
    <div class="panel-heading">
        <h3 class="panel-title">Story Outline</h3>
    </div>
    <div class="panel-body">
        <p><em>Story outline will be generated here.</em></p>
    </div>
</div>

<div class="panel panel-info">
    <div class="panel-heading">
        <h3 class="panel-title">Characters</h3>
    </div>
    <div class="panel-body">
        <p><em>Characters will be generated here.</em></p>
    </div>
</div>

{% endblock %}
